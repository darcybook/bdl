---
title: "3.数据类型"
weight: 3
date: 2023-07-18T08:10:23+08:00
lastmod: 2023-07-18T08:10:23+08:00
tags: ["data types"]
categories: ["data types"]
# bookComments: false
# bookSearchExclude: false
---
# 数据类型

BDL语言规定，程序中使用的每一个数据，必须指定其数据类型。


BDL语言数据类型

{{< mermaid >}}
graph TD;
    BDL语言数据类型-->构造类型
    BDL语言数据类型-->基本类型
    构造类型-->数组
    构造类型-->结构体
    基本类型-->字符串类型
    基本类型-->数值类型
    数值类型-->整型
    数值类型-->浮点型
{{< /mermaid >}}

{{< mermaid >}}
graph TD;
    整型-->DATE
    整型-->BINGINT
    整型-->INTEGER
    整型-->SMALLINT
    整型-->TINYINT
    整型-->BOOLEAN
    
{{< /mermaid >}}
{{< mermaid >}}
graph TD;
    浮点型-->c["FLOAT[(p)]"]
    浮点型-->d["SMALLFLOAT"]
    浮点型-->e["DECIMAL[(p[,s])]"]
    浮点型-->f["MONEY[(p[,s])]"]
{{< /mermaid >}}
{{< mermaid >}}
graph TD;
    字符串类型-->a["CHAR[(n)]"]
    字符串类型-->b["VARCHAR[(n[,r])]"]
    字符串类型-->STRING
    字符串类型-->BYTE
    字符串类型-->TEXT
{{< /mermaid >}}


1. 基本类型是最基础的简单数据类型，其值无法再分解为其它类型
2. 构造数据类型：顾名思义，构造数据类型是根据已经定义的一个或读个数据类型用构造的方法来定义的。
构造数据类型有多个其它数据类型组合而成。
一个构造类型的值可以分解成若干个成员或元素。
其中每个成员要么是一个基本数据类型，要么又是一个构造类型。
再BDL语言中构造类型又以下几种：
+ 数组类型：所有元素都是同一类型。即数组类型是统一数据类型元素的集合
+ 结构类型：不同数据类型的组合

本节只介绍基本数据类型，其它数据类型再后续陆续介绍。

## 整数类型

整数是日常生活和计算机中用得最频繁的数据类型，也比较容易理解。
整数从数学意义上来说就是从负无穷到正无穷之间的任意整型的数据，也就是任意自然数(如1、2、3、4、5)以及它们的负数或0。
如果用十进制表示一个自然数，十进制的位数越多，表示的整数也越大。
在计算机中用二进制表示数据，二进制的位数不能无限使用，所以在计算机中，整数有一定的大小限制，只能在一定的范围之内。
在以前内存“寸土寸金”的时代，哪怕是为了节约2个字节的内存，也是非常有必要的。

所以BDL语言的整数类型，又分为BINGINT<sup>8</sup>，INTEGER<sup>4</sup>，SMALLINT<sup>2</sup>，TINYINT<sup>1</sup>。

在BDL语言中，日期也是用整型标识的，DATE<sup>4</sup>,它和INTEGER<sup>4</sup>在内存中存储方式一致，并规定1899/12/31这一天为0，1900/01/01为1。

除了这些比较大的整数还有一个1位的整型BOOLEAN，它只能保存1或者0。

请验证以下代码的运行值，后续所有代码不需要的地方都不会在包括`main`函数：

```sql
define a smallint
let a = 32767
display a
let a = a + 1
display a
let a = a + 1
display a
```

## 整数的正负

## 浮点型


+ `FLOAT[(p)]`<sup>8</sup>

+ `SMALLFLOAT`<sup>4</sup>
+ `DECIMAL[(p[,s])]`

BDL中一种特殊浮点数，p位整数的位数（10进制的位数），s位小数的位数（10进制的位数）。
利用这种方式我们实现就可以知道这个数可以储存的小数位数精确度。
+ `MONEY[(p[,s])]`

MONEY是一种特殊的DECIMAL，唯一区别是scale默认位2。在显示时，根据DBMONEY环境变量的值显示对应的币种符号。

## 字符串类型

+ `CHAR[(n)]`

固定大小字串，"a    "
+ `VARCHAR[(n[,r])]`

动态字串，"a",r位保留字段，为了和数据库语法一致，一般不适用
+ `STRING`

动态大小字串"a...b"
+ `BYTE`<sup>31</sup>

~2.14 Gigabytes
二进制文件
+ `TEXT`<sup>31</sup>

~2.14 Gigabytes
文本文件


### 转义字符

在计算机中，有一批特殊形式的不可打印字符、单引号、双引号、反斜杠、回车退格等，需要用转义系列表示。前面的章节中printf函数使用的\n就是一种以“\”开头的字符序列，代表换行的意思。这种非显示字符难以用一般形式的字符表示，所以C语言规定用“\” 开头的字符其后跟随的字符用另外的意思代替，“\” 及其后有特殊意义的字符序列称做转义字符。

常见的转移字符：

字符形式|功能描述
-------|---------
\n|换行
\t|横向跳格，跳到下一个tab输出区
\v|竖向跳格
\b|退格
\r|回车
\f|换页
`\\`|字符\
\'|字符'
\"|字符"


请尝试运行以下代码，看程序输出是否和你预期的一样：
```sql
    display ""
    display "1abcdefghijklmn\n"
    display "\t\'\"2opqrstuvwxyz01|------\"\'"
    display "3mmmmmmmmmmmmmm\n"
```