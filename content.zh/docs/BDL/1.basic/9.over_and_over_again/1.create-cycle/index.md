---
title: "1.构造循环"
weight: 1
date: 2023-07-20T08:12:40+08:00
lastmod: 2023-07-20T08:12:40+08:00
tags: ["create cycle"]
categories: ["create cycle"]
# bookComments: false
# bookSearchExclude: false
---

# 构造循环


循环结构有两大要素:循环条件和循环体，当满足某个条件时，重复执行某些动作，直到该条件不再满足，这个表述很好地体现了循环条件和循环体的关系。

构造循环时，首先应明白要做什么，即“循环体是什么”，这是和程序的目的相关的。知道要干什么了还不够，还要明白什么时候开始做，什么时候停，如果没有设定合理的循环条件，很容易造成程序死循环，至使资源耗尽而导致电脑死机。

举个最简单的例子，要求计算从1加到100，因为本章讨论的是循环，所以我们撇开高斯的简便方法((1+100)*50=5050)。

程序的编写采用如下形式显然是不现实的:`sum=1+2+3+.....+100`写完这个式子就够费劲的，还好只有100个，要是有成千上万个，活活要累个半死。

在这种应用背景下，需要使用循环结构，只要一小段代码，如下。

```sql
    define i,sum integer
    while i<=100
        let sum = sum + i
        let i = i + 1
    end while
    display sfmt("\n结果是：%1",sum)
```
输出结果是`结果是：5050`。

**代码解析**

代码中采用的是while结构，i作为加数，sum作为被加数，用以保存结果，程序的关键部分是第3~4行。

i的初始值为1，当i小于等于100时( 循环条件)，会重复执行循环体，在循环体内做了两件事情，- -是将i和sum相加，结果重新保存到sum中，二是将i增加1，一步步逼近循环结束的条件。

由此可知，循环条件和循环体相互配合完成特定的功能。一次次的循环，距离循环结束
应越来越近，避免出现死循环，试想，如果循环体中只是完成`let sum=sum+i` 这一操，而不对i进行修改，那么循环条件`i<=100` 的条件将一 直满足，循环永不会终止。

{{< hint warning >}}
**注意**
在代码中，即使要计算1加到10000，只要将100修改为10000即可，十分方便快捷。
{{< /hint >}}

## 语法规则

```sql
while 表达式
    循环结构体
end while
```

在`while`结构中，表达式既可以是逻辑表达式或关系表达式，也可以是普通表达式，甚至常量或变量，判断的关键这个值是否为真（非`0`），下面看一下表达式仅是个变量的示例：

```sql
    define sum,i integer
    let i =100
    while i
        let sum = sum + i 
        let i = i -1
    end while
    display sfmt("\n结果是：%1",sum)
```
编译运行后结果为：
```
结果是：5050
```

**代码解析**

两种代码实现了同样的结果，第二种i初始值为100，在循环体结构中逐次-1，知道i变为0，循环条件不满足，程序退出，完成了`1+2+3+...+100`的计算。
